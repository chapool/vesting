# HZ Token æ›´æ–°æ—¥å¿—

## ç‰ˆæœ¬ 2.1.0 - 2025å¹´8æœˆ4æ—¥

### ğŸ‰ é‡å¤§æ›´æ–°

æœ¬æ¬¡æ›´æ–°åŒ…å«äº†å…¨é¢çš„å®‰å…¨å¢å¼ºã€åŠŸèƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒæ”¹è¿›ï¼Œä½¿HZ Tokenç”Ÿæ€ç³»ç»Ÿæ›´åŠ å®‰å…¨ã€é«˜æ•ˆå’Œæ™ºèƒ½ã€‚

---

## ğŸ“Š MiningPool å®‰å…¨ä¼˜åŒ– 

### ğŸ›¡ï¸ å®‰å…¨æ¼æ´ä¿®å¤

**é—®é¢˜**: åŸæœ‰çš„å°é¢è‡ªåŠ¨å®¡æ‰¹æœºåˆ¶å­˜åœ¨å®‰å…¨æ¼æ´ï¼Œæ¶æ„ç”¨æˆ·å¯èƒ½é€šè¿‡é¢‘ç¹æäº¤å°é¢ç”³è¯·æç©ºèµ„é‡‘æ± ã€‚

**è§£å†³æ–¹æ¡ˆ**: 
- âœ… **åˆ†ç¦»è¯·æ±‚å’Œè½¬è´¦**: å°é¢æç°éœ€è¦é“¾ä¸‹å®¡æ ¸åæ‰¹é‡æ‰§è¡Œ
- âœ… **æ·»åŠ å†·å´æœŸæœºåˆ¶**: ç”¨æˆ·è¯·æ±‚é—´éš”é™åˆ¶ï¼ˆé»˜è®¤1å°æ—¶ï¼‰
- âœ… **æ¯æ—¥é™é¢æ§åˆ¶**: ç”¨æˆ·å’Œå…¨å±€æ¯æ—¥æç°é™é¢
- âœ… **åˆ†å±‚IDç³»ç»Ÿ**: é“¾ä¸Šé“¾ä¸‹IDå¼ºå…³è”ï¼Œé˜²æ­¢é‡å¤å’Œç¯¡æ”¹

### ğŸ”§ åŠŸèƒ½å¢å¼º

#### **é“¾ä¸‹å®¡æ ¸äººè§’è‰²**
```solidity
mapping(address => bool) public offChainAuditors;
function addOffChainAuditor(address auditor) external onlyOwner;
```

#### **æ‰¹é‡è½¬è´¦ä¼˜åŒ–**
```solidity
function batchSmallTransfer(uint256[] calldata requestIds) external;
```
- èŠ‚çœGasè´¹ç”¨
- æé«˜å¤„ç†æ•ˆç‡
- æ”¯æŒæ‰¹é‡çŠ¶æ€æ›´æ–°

#### **æç°é™é¢ç®¡ç†**
```solidity
uint256 public minWithdrawAmount;  // æœ€å°æç°é‡‘é¢
uint256 public maxWithdrawAmount;  // æœ€å¤§æç°é‡‘é¢
uint256 public dailyUserLimit;    // ç”¨æˆ·æ—¥é™é¢
uint256 public dailyGlobalLimit;  // å…¨å±€æ—¥é™é¢
```

#### **åˆ†å±‚IDç³»ç»Ÿ**
```solidity
struct IdManager {
    uint256 nextOnChainId;
    mapping(uint256 => uint256) offChainToOnChain;
    mapping(uint256 => uint256) onChainToOffChain;
    mapping(uint256 => bool) offChainIdExists;
    mapping(bytes32 => bool) requestHashExists;
}
```

### ğŸ“ˆ ç»Ÿè®¡ç›‘æ§

#### **æ•°æ®ç»Ÿè®¡**
- æ€»æå–ä»£å¸æ•°é‡
- å·²é‡Šæ”¾æŒ–çŸ¿ä»£å¸æ€»æ•°
- å„ç±»æç°åˆ†ç±»ç»Ÿè®¡
- å®æ—¶å¯é‡Šæ”¾é‡‘é¢æŸ¥è¯¢

#### **æ‰¹é‡æŸ¥è¯¢åŠŸèƒ½**
```solidity
function getBatchRequestInfo(uint256[] calldata requestIds) external view;
function validateOffChainIds(uint256[] calldata offChainIds) external view;
function getUserRemainingDailyLimit(address user) external view;
```

### ğŸ§¹ è‡ªåŠ¨åŒ–ç®¡ç†

#### **è¿‡æœŸè¯·æ±‚æ¸…ç†**
```solidity
function cleanupExpiredRequests(uint256[] calldata expiredIds) external;
```
- é»˜è®¤30å¤©è¿‡æœŸæ—¶é—´
- ä»»ä½•äººéƒ½å¯ä»¥æ¸…ç†
- å®Œæ•´çš„äº‹ä»¶è®°å½•

---

## ğŸ¯ HZToken åŠ¨æ€äº¤æ˜“ç¨ç³»ç»Ÿ

### ğŸš€ æ™ºèƒ½ç¨æ”¶æœºåˆ¶

**ä¼ ç»Ÿé—®é¢˜**: å›ºå®šç¨ç‡æ— æ³•é€‚åº”ä¸åŒå¸‚åœºæ¡ä»¶å’Œäº¤æ˜“åœºæ™¯ã€‚

**åˆ›æ–°è§£å†³æ–¹æ¡ˆ**: å®ç°äº†ä¸šç•Œé¢†å…ˆçš„åŠ¨æ€äº¤æ˜“ç¨ç³»ç»Ÿã€‚

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

#### **å¤šå±‚çº§ç¨æ”¶ä½“ç³»**
```solidity
struct TaxConfig {
    uint256 buyTax;        // ä¹°å…¥ç¨
    uint256 sellTax;       // å–å‡ºç¨  
    uint256 transferTax;   // è½¬è´¦ç¨
    uint256 liquidityTax;  // æµåŠ¨æ€§ç¨
    bool dynamicTaxEnabled;
    uint256 maxDynamicRate;
}
```

#### **æ™ºèƒ½åŠ¨æ€è°ƒæ•´**
ç¨ç‡åŸºäºä»¥ä¸‹å› ç´ å®æ—¶è°ƒæ•´ï¼š
- **ğŸ“Š äº¤æ˜“é‡‘é¢**: å¤§é¢äº¤æ˜“é€’å¢ç¨ç‡
- **ğŸ“ˆ äº¤æ˜“é‡**: åŸºäº24å°æ—¶äº¤æ˜“é‡åŠ¨æ€è°ƒæ•´  
- **ğŸ”„ äº¤æ˜“ç±»å‹**: ä¹°å…¥ä¼˜æƒ ï¼Œå–å‡ºåŠ ç¨
- **â° å¸‚åœºæ´»è·ƒåº¦**: åŸºäºäº¤æ˜“é¢‘ç‡è°ƒæ•´

#### **å®‰å…¨æ§åˆ¶æœºåˆ¶**
- **ğŸ”’ æœ€å¤§å€æ•°é™åˆ¶**: é˜²æ­¢ç¨ç‡è¿‡åº¦æ³¢åŠ¨
- **ğŸ‘¥ å…ç¨åœ°å€ç®¡ç†**: æ‰¹é‡è®¾ç½®å…ç¨è´¦æˆ·
- **ğŸŠ AMMæ± è¯†åˆ«**: å‡†ç¡®åŒºåˆ†ä¹°å…¥/å–å‡ºäº¤æ˜“
- **ğŸ’§ æµåŠ¨æ€§æ± ç®¡ç†**: ç‰¹æ®Šç¨ç‡å¤„ç†

### ğŸ“Š å®æ—¶ç›‘æ§ç»Ÿè®¡

#### **äº¤æ˜“ç»Ÿè®¡**
```solidity
struct TradingStats {
    uint256 totalVolume24h;
    uint256 largeTransactionCount;
    uint256 averageTransactionSize;
    uint256 lastStatsUpdate;
}
```

#### **ç¨æ”¶é¢„è§ˆåŠŸèƒ½**
```solidity
function previewTax(address from, address to, uint256 amount) 
    external view returns (
        uint256 taxAmount,
        uint256 transferAmount,
        string memory taxType,
        uint256 baseTaxRate,
        uint256 dynamicMultiplier
    );
```

### ğŸ® ç®¡ç†åŠŸèƒ½

#### **æ‰¹é‡é…ç½®**
```solidity
function batchSetAMM(address[] calldata pools, bool[] calldata flags);
function batchSetTaxExempt(address[] calldata accounts, bool[] calldata flags);
```

#### **å‚æ•°è°ƒæ•´**
```solidity
function setDynamicTaxParams(
    uint256 volumeThreshold,
    uint256 timeWindow,
    uint256 priceImpactFactor,
    uint256 volatilityFactor
);
```

---

## ğŸ—ï¸ Vesting åˆçº¦ä¼˜åŒ–

### âœ… å·²å®ç°ä¼˜åŒ–

#### **çµæ´»éƒ¨ç½²**
- âœ… `setToken()` æ–¹æ³•ï¼šæ”¯æŒåéƒ¨ç½²è®¾ç½®ä»£å¸åœ°å€
- âœ… æš‚åœåŠŸèƒ½ï¼šç´§æ€¥æƒ…å†µä¸‹çš„ç³»ç»Ÿæ§åˆ¶

#### **å®‰å…¨å¢å¼º**
- âœ… ä¿®é¥°ç¬¦ä¼˜åŒ–ï¼š`onlyIfScheduleNotRevoked`, `onlyIfScheduleExists`
- âœ… ä»£ç ç®€åŒ–ï¼šå˜é‡åä»`vestingSchedule`ç®€åŒ–ä¸º`schedule`

#### **åŠŸèƒ½å®Œå–„**
- âœ… æ‰¹é‡æ“ä½œï¼šæé«˜Gasæ•ˆç‡
- âœ… ä»£ç†é‡Šæ”¾ï¼šç®¡ç†å‘˜å¯ä»£ä¸ºæ‰§è¡Œé‡Šæ”¾

### ğŸ¯ å¾…å®ç°æ”¹è¿›å»ºè®®

#### **å®‰å…¨å¢å¼º** (é«˜ä¼˜å…ˆçº§)
1. **é‡Šæ”¾é¢‘ç‡é™åˆ¶**: é˜²æ­¢é¢‘ç¹å¤§é¢é‡Šæ”¾
2. **å¤šç­¾æ²»ç†**: é‡è¦æ“ä½œéœ€è¦å¤šé‡ç¡®è®¤  
3. **ç´§æ€¥åœæ­¢**: ç³»ç»Ÿçº§å’Œè®¡åˆ’çº§ç´§æ€¥æ§åˆ¶

#### **åŠŸèƒ½å¢å¼º** (é«˜ä¼˜å…ˆçº§)
1. **åŠ¨æ€é‡Šæ”¾ç­–ç•¥**: åŸºäºä¸šç»©ã€é‡Œç¨‹ç¢‘çš„æ™ºèƒ½é‡Šæ”¾
2. **æ¡ä»¶é‡Šæ”¾æœºåˆ¶**: å¯ç¼–ç¨‹çš„é‡Šæ”¾æ¡ä»¶
3. **è‡ªåŠ¨é‡Šæ”¾è°ƒåº¦**: å®šæ—¶è‡ªåŠ¨æ‰§è¡Œé‡Šæ”¾

#### **ä½“éªŒä¼˜åŒ–** (ä¸­ä¼˜å…ˆçº§)  
1. **é¢„ä¼°åŠŸèƒ½**: ä¸‹æ¬¡é‡Šæ”¾æ—¶é—´å’Œé‡‘é¢é¢„æµ‹
2. **è¿›åº¦æŸ¥è¯¢**: é‡Šæ”¾è¿›åº¦ç™¾åˆ†æ¯”å’Œå‰©ä½™æ—¶é—´
3. **é€šçŸ¥ç³»ç»Ÿ**: å³å°†é‡Šæ”¾å’Œé‡Œç¨‹ç¢‘æé†’

---

## ğŸ”’ å®‰å…¨æ”¹è¿›æ€»ç»“

### ğŸ›¡ï¸ MiningPool å®‰å…¨é˜²æŠ¤

| å®‰å…¨æœºåˆ¶ | å®ç°æ–¹å¼ | é˜²æŠ¤æ•ˆæœ |
|---------|---------|---------|
| è¯·æ±‚å†·å´æœŸ | ç”¨æˆ·çº§æ—¶é—´é—´éš”æ§åˆ¶ | é˜²æ­¢é¢‘ç¹æ”»å‡» |
| æ¯æ—¥é™é¢ | åŒé‡é™é¢æœºåˆ¶ | æ§åˆ¶é£é™©æš´éœ² |
| åˆ†å±‚ID | é“¾ä¸Šé“¾ä¸‹å¼ºå…³è” | é˜²æ­¢é‡å¤å’Œç¯¡æ”¹ |
| æ‰¹é‡å®¡æ ¸ | é“¾ä¸‹å®¡æ ¸+é“¾ä¸Šæ‰§è¡Œ | æé«˜å®‰å…¨æ€§å’Œæ•ˆç‡ |
| è¿‡æœŸæ¸…ç† | è‡ªåŠ¨æ¸…ç†æœºåˆ¶ | ç»´æŠ¤ç³»ç»Ÿå¥åº· |

### ğŸ¯ HZToken é£é™©æ§åˆ¶

| æ§åˆ¶æœºåˆ¶ | åŠŸèƒ½ | æ•ˆæœ |
|---------|-----|------|
| åŠ¨æ€ç¨ç‡ | æ™ºèƒ½è°ƒæ•´ç¨æ”¶ | é€‚åº”å¸‚åœºæ¡ä»¶ |
| äº¤æ˜“ç›‘æ§ | å®æ—¶ç»Ÿè®¡åˆ†æ | åŠæ—¶å‘ç°å¼‚å¸¸ |
| å…ç¨ç®¡ç† | ç™½åå•æœºåˆ¶ | çµæ´»æƒé™æ§åˆ¶ |
| AMMè¯†åˆ« | æ™ºèƒ½äº¤æ˜“åˆ†ç±» | ç²¾å‡†ç¨æ”¶ç­–ç•¥ |

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### âš¡ Gas ä¼˜åŒ–

1. **æ‰¹é‡æ“ä½œ**: å‡å°‘äº¤æ˜“æ¬¡æ•°ï¼Œé™ä½Gasæ¶ˆè€—
2. **å­˜å‚¨ä¼˜åŒ–**: åˆç†çš„æ•°æ®ç»“æ„è®¾è®¡
3. **æŸ¥è¯¢æ•ˆç‡**: O(1)æ—¶é—´å¤æ‚åº¦çš„å…³é”®æ“ä½œ
4. **äº‹ä»¶ä¼˜åŒ–**: ç²¾ç®€äº‹ä»¶å‚æ•°ï¼Œé™ä½å­˜å‚¨æˆæœ¬

### ğŸ” æŸ¥è¯¢æ€§èƒ½

1. **åˆ†é¡µæŸ¥è¯¢**: æ”¯æŒå¤§é‡æ•°æ®çš„åˆ†é¡µè·å–
2. **æ‰¹é‡æŸ¥è¯¢**: ä¸€æ¬¡è·å–å¤šä¸ªç›¸å…³æ•°æ®
3. **ç¼“å­˜æœºåˆ¶**: å¸¸ç”¨æ•°æ®çš„æ™ºèƒ½ç¼“å­˜
4. **ç´¢å¼•ä¼˜åŒ–**: å…³é”®å­—æ®µçš„å¿«é€Ÿæ£€ç´¢

---

## ğŸ›ï¸ ç®¡ç†æ¥å£å‡çº§

### ğŸ”§ MiningPool ç®¡ç†

#### **æƒé™ç®¡ç†**
```solidity
function addOffChainAuditor(address auditor) external onlyOwner;
function setRequestCooldown(uint256 cooldown) external onlyOwner;
function setDailyLimits(uint256 userLimit, uint256 globalLimit) external onlyOwner;
```

#### **æŸ¥è¯¢æ¥å£**
```solidity
function getUserRemainingDailyLimit(address user) external view returns (uint256);
function isRequestExpired(uint256 requestId) external view returns (bool);
function getWithdrawalStatistics() external view returns (...);
```

### ğŸ¯ HZToken ç®¡ç†

#### **ç¨æ”¶é…ç½®**
```solidity
function setTaxConfig(uint256 buyTax, uint256 sellTax, uint256 transferTax, uint256 liquidityTax, bool dynamicEnabled, uint256 maxDynamicRate) external onlyOwner;
function setDynamicTaxParams(uint256 volumeThreshold, uint256 timeWindow, uint256 priceImpactFactor, uint256 volatilityFactor) external onlyOwner;
```

#### **åœ°å€ç®¡ç†**
```solidity
function batchSetAMM(address[] calldata pools, bool[] calldata flags) external onlyOwner;
function batchSetTaxExempt(address[] calldata accounts, bool[] calldata flags) external onlyOwner;
```

---

## ğŸ“ äº‹ä»¶ç³»ç»Ÿå‡çº§

### ğŸ”” æ–°å¢äº‹ä»¶

#### **MiningPool äº‹ä»¶**
```solidity
event IdMappingCreated(uint256 indexed onChainId, uint256 indexed offChainId, bytes32 requestHash);
event RequestCooldownUpdated(uint256 cooldown);
event DailyLimitsUpdated(uint256 userLimit, uint256 globalLimit);
event ExpiredRequestsCleaned(address indexed cleaner, uint256 cleanedCount);
```

#### **HZToken äº‹ä»¶** 
```solidity
event TaxDeducted(address indexed from, address indexed to, uint256 amount, string taxType);
event TaxConfigUpdated(uint256 buyTax, uint256 sellTax, uint256 transferTax, uint256 liquidityTax, bool dynamicEnabled);
event AMMUpdated(address indexed pool, bool isAMM);
event DynamicTaxParamsUpdated(uint256 volumeThreshold, uint256 timeWindow, uint256 priceImpactFactor, uint256 volatilityFactor);
```

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### MiningPool æ‰¹é‡å°é¢è½¬è´¦

```solidity
// 1. ç”¨æˆ·æäº¤è¯·æ±‚
uint256 requestId = miningPool.requestWithdrawal(
    1000 * 10**18,  // é‡‘é¢
    "Mining reward", // åŸå› 
    123456,         // é“¾ä¸‹è®°å½•ID
    789             // éšæœºæ•°
);

// 2. é“¾ä¸‹å®¡æ ¸é€šè¿‡åï¼Œå®¡æ ¸äººæ‰§è¡Œæ‰¹é‡è½¬è´¦
uint256[] memory requestIds = [requestId1, requestId2, requestId3];
miningPool.batchSmallTransfer(requestIds);
```

### HZToken ç¨æ”¶é¢„è§ˆ

```solidity
// é¢„è§ˆäº¤æ˜“ç¨æ”¶
(uint256 taxAmount, uint256 transferAmount, string memory taxType, uint256 baseTaxRate, uint256 dynamicMultiplier) 
    = hzToken.previewTax(from, to, amount);

console.log("Tax amount:", taxAmount);
console.log("Tax type:", taxType);  
console.log("Dynamic multiplier:", dynamicMultiplier);
```

---

## ğŸ” æµ‹è¯•å’ŒéªŒè¯

### ğŸ§ª å»ºè®®æµ‹è¯•åœºæ™¯

#### **MiningPool æµ‹è¯•**
1. å†·å´æœŸé™åˆ¶æµ‹è¯•
2. æ¯æ—¥é™é¢æµ‹è¯•  
3. æ‰¹é‡è½¬è´¦æ€§èƒ½æµ‹è¯•
4. è¿‡æœŸè¯·æ±‚æ¸…ç†æµ‹è¯•
5. IDæ˜ å°„å®Œæ•´æ€§æµ‹è¯•

#### **HZToken æµ‹è¯•**
1. åŠ¨æ€ç¨ç‡è®¡ç®—æµ‹è¯•
2. ä¸åŒäº¤æ˜“åœºæ™¯ç¨ç‡æµ‹è¯•
3. AMMæ± è¯†åˆ«å‡†ç¡®æ€§æµ‹è¯•
4. ç»Ÿè®¡æ•°æ®æ­£ç¡®æ€§æµ‹è¯•
5. Gasæ¶ˆè€—ä¼˜åŒ–éªŒè¯

---

## ğŸ“š ç›¸å…³æ–‡æ¡£æ›´æ–°

1. **[2.Contracts.md](./2.Contracts.md)** - åˆçº¦æŠ€æœ¯å®ç°æ–‡æ¡£å·²æ›´æ–°
2. **[4.Security.md](./4.Security.md)** - å®‰å…¨æœºåˆ¶æ–‡æ¡£å·²æ›´æ–°  
3. **[5.FAQ.md](./5.FAQ.md)** - å¸¸è§é—®é¢˜å·²è¡¥å……æ–°åŠŸèƒ½è¯´æ˜

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### ç«‹å³è®¡åˆ’
- [ ] ç¼–å†™å…¨é¢çš„å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•å’Œå‹åŠ›æµ‹è¯•
- [ ] ä»£ç å®¡è®¡å’Œå®‰å…¨æ£€æŸ¥
- [ ] éƒ¨ç½²è„šæœ¬ä¼˜åŒ–

### åç»­ä¼˜åŒ–
- [ ] Vestingåˆçº¦å®‰å…¨å¢å¼ºå®ç°
- [ ] æ›´å¤šåŠ¨æ€ç¨æ”¶ç­–ç•¥
- [ ] è·¨é“¾å…¼å®¹æ€§ç ”ç©¶
- [ ] ç”¨æˆ·ç•Œé¢å·¥å…·å¼€å‘

---

*æœ€åæ›´æ–°: 2025å¹´8æœˆ4æ—¥*
*ç‰ˆæœ¬: 2.1.0*
*ç»´æŠ¤è€…: HZ Token å¼€å‘å›¢é˜Ÿ*